<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>主页面tab页面</title>
    <link rel="stylesheet" type="text/css" href="../css/aui/aui.css" />
    <link rel="stylesheet" type="text/css" href="../css/common.css" />
    <style>

    </style>
</head>
<body>
    <div>
        <footer class="aui-bar aui-bar-tab snt-bar-fiexd" id="footer">
            <div class="aui-bar-tab-item aui-active" onclick="randomSwitchBtn(this);" tapmode>
                <i class="aui-iconfont aui-icon-home"></i>
                <div class="aui-bar-tab-label">首页</div>
            </div>
            <div class="aui-bar-tab-item" onclick="randomSwitchBtn(this);" tapmode>
                <i class="aui-iconfont aui-icon-comment"></i>
                <div class="aui-bar-tab-label">消息</div>
            </div>
            <div class="aui-bar-tab-item" onclick="randomSwitchBtn( this );" tapmode>
                <i class="aui-iconfont aui-icon-my"></i>
                <div class="aui-bar-tab-label">我的</div>
            </div>
        </footer>
    </div>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript">
    apiready = function(){
        //设置tab栏
        funIniGroup();
    }

    function funIniGroup() {
        api.openFrameGroup({
            name: 'group',
            scrollEnabled: false,
            rect: {
                x: 0,
                y: 0,
                w: api.winWidth,
                h: 'auto',
                marginLeft: 0,
                marginTop: 0,
                marginBottom: $api.dom('#footer').offsetHeight,
                marginRight: 0
            },
            bounces: false,
            index: 0,
            preload: 2,
            reload: true,

            frames: [{
                name: 'main_frame',
                url: './main_frame.html',
                scrollEnabled: true,
                vScrollBarEnabled: true,
                hScrollBarEnabled: false,
                bounces: false,
            }, {
                name: 'message_frame',
                url: './message/message_frame.html'
            }, {
                name: 'mine_frame',
                url: './mine/mine_frame.html',
            }]
        }, function(ret, err) {});
    }

    // 随意切换按钮
    function randomSwitchBtn(tag) {
        if (tag == $api.dom('#footer .aui-bar-tab-item.aui-active')) return;
        var eFootLis = $api.domAll('#footer .aui-bar-tab-item'),
            index = 0;
        if (tag == 1) {
            index = 2;
            $api.removeCls(eFootLis[1], 'aui-active');
        } else if (tag == 2 || tag == 3) {
            index = 1;
            $api.removeCls(eFootLis[2], 'aui-active');
        } else {
            for (var i = 0, len = eFootLis.length; i < len; i++) {
                if (tag == eFootLis[i]) {
                    index = i;
                } else {
                    $api.removeCls(eFootLis[i], 'aui-active');
                }

            }
        }

        setTimeout(function() {
            $api.addCls(eFootLis[index], 'aui-active');
            api.setFrameGroupIndex({
                name: 'group',
                index: index,
            });
        }, 100);

    }
</script>
</html>
